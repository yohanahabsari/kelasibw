<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>Material Design for Bootstrap</title>
  <!-- MDB icon -->
  <link rel="icon" href="img/favicons/favicon.ico" type="image/x-icon" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" />
  <!-- Google Fonts Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" />
  <!-- MDB -->
  <link rel="stylesheet" href="css/mdb.min.css" />
  <link rel="stylesheet" href="plugins/css/cookie.min.css" />
  <link rel="stylesheet" href="plugins/css/onboarding.min.css" />
</head>

<body onload="loadAwal();">

  <!-- Facebook login -->
  <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v11.0&appId=81849056149&autoLogAppEvents=1" nonce="SAaqz2HH"></script>

  <!-- Start your project here-->
<!--navbar-->

<!-- Navbar -->
<nav class="navbar  sticky-top navbar-expand-lg navbar-light bg-light">
  <!-- Container wrapper -->
  <div class="container-fluid">
    <!-- Toggle button -->
    <button
      class="navbar-toggler"
      type="button"
      data-mdb-toggle="collapse"
      data-mdb-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars"></i>
    </button>

    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Navbar brand -->
      <a class="navbar-brand mt-2 mt-lg-0" href="index.html">
        <img
          src="/img/favicons/favicon-16x16.png"
          height="15"
          alt=""
          loading="lazy"
        />
      </a>
      <!-- Left links -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="kelas.html">Kelas</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Pertanyaan</a>
        </li>
      </ul>
      <!-- Left links -->
    </div>
    <!-- Collapsible wrapper -->

    <!-- Right elements -->
    <div class="d-flex align-items-center">
      <!-- Icon -->


      <!-- Notifications -->
      <a
        class="me-3 dropdown-toggle hidden-arrow"
        href="#"
        id="navbarDropdownMenuLink"
        role="button"
        data-mdb-toggle="dropdown"
        aria-expanded="false"
      >
        <i class="fas fa-bell"></i>
        <span class="badge rounded-pill badge-notification bg-danger">1</span>
      </a>
      <ul
        class="dropdown-menu dropdown-menu-end"
        aria-labelledby="navbarDropdownMenuLink"
      >
        <li>
          <a class="dropdown-item" href="#">Some news</a>
        </li>
        <li>
          <a class="dropdown-item" href="#">Another news</a>
        </li>
        <li>
          <a class="dropdown-item" href="#">Something else here</a>
        </li>
      </ul>

      <!-- Avatar -->
      <div       data-mdb-step
      data-mdb-index="1"
      data-mdb-onboarding-content="Anda harus login untuk mendapatkan poin atau mengakses kelas">
      <a class=" me-3  text-black" href="#"   role="button"
      data-mdb-toggle="dropdown"
      aria-expanded="false" >
        <span class='showNama'></span>
      </a>
      <button type="button" class="btn btn-primary btn-rounded" data-mdb-toggle="modal" data-mdb-target="#exampleModal"  id="btnLogin"    >
        Login
      </button>
    </div>


      <ul
        class="dropdown-menu dropdown-menu-end"
        aria-labelledby="navbarDropdownMenuLink"
      >
        <li>
          <a class="dropdown-item" href="#">My profile</a>
        </li>
        <li>
          <a class="dropdown-item" href="#">Settings</a>
        </li>
        <li>
          <a class="dropdown-item" href="#">Logout</a>
        </li>
      </ul>
    </div>
    <!-- Right elements -->
  </div>
  <!-- Container wrapper -->
</nav>

<!-- masuk kode kelas -->
<div class="container my-5 py-5">

    <!-- Section: Design Block -->
    <section class="mb-8">
  
      <style>
        .gradient-custom {
          background: rgb(37, 117, 252, 1);
          background: -webkit-linear-gradient(310deg, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1));
          background: linear-gradient(310deg, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1));
        }
      </style>
  
      <div class="gradient-custom-10 text-white rounded-6 py-5">
        <div class="row d-flex justify-content-center text-center mt-5">
          <div class="col-12">
            <div class="d-flex align-items-center justify-content-center text-dark bg-white rounded-circle mb-4 mx-auto" style="width: 75px; height: 75px;">
                <img
                src="/img/favicons/favicon-96x96.png"
                height="50"
                alt=""
                loading="lazy"
              />
            </div>
            <h2 class="fs-1 pt-2 mb-3" style="font-weight: 900;">Konfirmasi Email / Whatsapp Number </h2>
            <p class="lead fw-normal opacity-80 mb-5 mx-auto" style="max-width: 400px;">
              Jika Anda login melalui email, Anda akan mendapat kode konfirmasi. Jika Anda login melalui Whatsapp Number, Anda perlu mengirim wa ke call centre IBW untuk mendapatkan kode konfirmasi
            </p>
          </div>
        </div>
        <div class="row d-flex justify-content-center text-center mb-5">
          <div class="col-md-10 col-lg-7 col-xl-6">
            <div class="d-md-flex mb-3 mb-md-2 ms-xl-4">
              <div class="form-outline flex-fill me-md-1 mb-3 mb-md-0 form-white">
                <input
                  type="text"
                  id="formControlEmail0"
                  class="form-control form-control-lg"
                />
                <label class="form-label" for="formControlEmail0">Kode 4 digit </label>
              </div>
              <a href="#!" type="button" class="btn btn-primary btn-lg ms-md-2 px-5">Konfirmasi</a>
            </div>
          </div>
        </div>
      </div>
  
    </section>
    <!-- Section: Design Block -->
  
  </div>
  <!--  masuk kode kelas -->
  <!-- Modal -->
<div class="modal top fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-mdb-backdrop="true" data-mdb-keyboard="true">
    <div class="modal-dialog  ">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Login / Register </h5>
          <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="card-body p-4">
            <!-- Pills navs -->
            <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
              <li class="nav-item" role="presentation">
                <a class="nav-link active" id="tab-login" data-mdb-toggle="pill" href="#pills-login" role="tab"
                  aria-controls="pills-login" aria-selected="true">Login</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link" id="tab-register" data-mdb-toggle="pill" href="#pills-register" role="tab"
                  aria-controls="pills-register" aria-selected="false">Register</a>
              </li>
            </ul>
            <!-- Pills navs -->
  
            <!-- Pills content -->
            <div class="tab-content">
              <div class="tab-pane fade show active" id="pills-login" role="tabpanel" aria-labelledby="tab-login">
                <form>
                  <div class="text-center mb-3">
                  <fb:login-button 
    scope="public_profile,email" 
    onlogin="checkLoginState();">
  </fb:login-button>
                    <button type="button" class="btn btn-primary btn-floating mx-1 d-none">
                      <i class="fab fa-facebook-f"></i>
                    </button>
  
                    <button type="button" class="btn btn-primary btn-floating mx-1 d-none">
                      <i class="fab fa-google"></i>
                    </button>
  
                    <button type="button" class="btn btn-primary btn-floating mx-1 d-none">
                      <i class="fab fa-twitter"></i>
                    </button>
  
                    <button type="button" class="btn btn-primary btn-floating mx-1 d-none">
                      <i class="fab fa-github"></i>
                    </button>
                  </div>
  
                  <p class="text-center">or:</p>
  
                  <!-- Email input -->
                  <div class="form-outline mb-4">
                    <input type="text" id="loginName" class="form-control" />
                    <label class="form-label" for="loginName">Email or whatsapp number (62xxxxxx)</label>
                  </div>
  
                  <!-- Submit button -->
                  <button type="submit" class="btn btn-primary btn-block mb-4">
                    Sign in
                  </button>
  
                  <!-- Register buttons -->
                  <div class="text-center">
                    <p>Not a member? <a href="#!">Register</a></p>
                  </div>
                </form>
              </div>
              <div class="tab-pane fade" id="pills-register" role="tabpanel" aria-labelledby="tab-register">
                <form>
                  <div class="text-center mb-3">
                    <p>Sign up with:</p>
             
                    <button type="button"  scope="public_profile,email"  class="btn btn-primary btn-floating mx-1  d-none" onclick="checkLoginState();">
                      <i class="fab fa-facebook-f"></i>
                    </button>
  
  
                    <button type="button" class="btn btn-primary btn-floating mx-1 d-none">
                      <i class="fab fa-google"></i>
                    </button>
  
                    <button type="button" class="btn btn-primary btn-floating mx-1 d-none">
                      <i class="fab fa-twitter"></i>
                    </button>
  
                    <button type="button" class="btn btn-primary btn-floating mx-1 d-none">
                      <i class="fab fa-github"></i>
                    </button>
                  </div>
  
                  <p class="text-center">or:</p>
  
                  <!-- Name input -->
                  <div class="form-outline mb-4">
                    <input type="text" id="registerName" class="form-control" />
                    <label class="form-label" for="registerName">Name</label>
                  </div>
  
                  <!-- Email input -->
                  <div class="form-outline mb-4">
                    <input type="email" id="registerEmail" class="form-control" />
                    <label class="form-label" for="registerEmail">Email</label>
                  </div>
                  <!-- WA input -->
                  <div class="form-outline mb-4">
                    <input type="email" id="registerWa" class="form-control" />
                    <label class="form-label" for="registerWa">Whatsapp (62xxxxxx)</label>
                  </div>
  
                  <!-- Submit button -->
                  <button type="submit" class="btn btn-primary btn-block mb-3">
                    Sign Up 
                  </button>
                </form>
              </div>
            </div>
            <!-- Pills content -->
          </div>
       
  
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-mdb-dismiss="modal">
            Close
          </button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
  
    <!-- toast -->
  <div
    class="toast fade mx-auto"
    id="basic-success-example"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
    data-mdb-autohide="true"
    data-mdb-delay="2000"
    data-mdb-position="bottom-center"
    data-mdb-append-to-body="true"
    data-mdb-stacking="true"
    data-mdb-width="350px"
    data-mdb-color="warning"
  >
    <div class="toast-header text-white">
      <strong class="me-auto">Indonesian Babywearers</strong>
      <small>11 mins ago</small>
      <button type="button" class="btn-close btn-close-white" data-mdb-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body text-white">Anda harus login untuk dapat mengakses kelas <span id="spanNama"></span></div>
  </div>
    <!-- toast -->
<!-- End your project here-->

<!-- MDB -->
<script type="text/javascript" src="js/mdb.min.js"></script>
<script type="text/javascript" src="js/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="plugins/js/cookie.min.js"></script>
<script type="text/javascript" src="plugins/js/onboarding.min.js"></script>
<!-- Custom scripts -->
<script type="text/javascript">
                  function checkLoginState() {
                  FB.getLoginStatus(function(response) {
                    statusChangeCallback(response);
                  });
                }
                function statusChangeCallback(response) {
                  if (response.status === 'connected') {
  // The user is logged in and has authenticated your
  // app, and response.authResponse supplies
  // the user's ID, a valid access token, a signed
  // request, and the time the access token 
  // and signed request each expire.
  var uid = response.authResponse.userID;
  var accessToken = response.authResponse.accessToken;
  //todo: insert ke cookie dia udah login 
  FB.api('/me', function(response) {
     console.log('Good to see you, ' + response.name + '.');
     document.getElementById('spanNama').innerText=response.name;
     let basicInstance = mdb.Toast.getInstance(document.getElementById('basic-success-example'));
     basicInstance.show();
     $('.showNama').text(response.name )
     Cookie.set('fbid', response.userID, {expires: 30});
     Cookie.set('nama', response.name, {expires: 30});
     location.reload();
   });
} else if (response.status === 'not_authorized') {
  // The user hasn't authorized your application.  They
  // must click the Login button, or you must call FB.login
  // in response to a user gesture, to launch a login dialog.
        FB.login(function(response) {
        if (response.authResponse) {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
          console.log('Good to see you, ' + response.name + '.');
          
          //todo: insert ke cookie dia udah login 
          Cookie.set('fbid', response.userID, {expires: 30})
          Cookie.set('nama', response.name, {expires: 30})
        });
        } else {
        Cookie.set('nama', '', {expires: 30})
        console.log('User cancelled login or did not fully authorize.');
        }
    });
} else {
  // The user isn't logged in to Facebook. You can launch a
  // login dialog with a user gesture, but the user may have
  // to log in to Facebook before authorizing your application.
  //todo : alert dia belum login facebook
}

                }

                function loadAwal(){
                  $('.showNama').text(Cookie.get('nama') );
                  if(Cookie.get('nama')!=''){
                    //document.getElementById('spanNama').innerText=Cookie.get('nama');
                   // let basicInstance = mdb.Toast.getInstance(document.getElementById('basic-success-example'));
                   // basicInstance.show();
                    $('#btnLogin').hide();
                  } else {$('#spanNama').hide();
                   let basicInstance = mdb.Toast.getInstance(document.getElementById('basic-success-example'));
                   basicInstance.show();
                }

                }
</script>
</body>

</html>